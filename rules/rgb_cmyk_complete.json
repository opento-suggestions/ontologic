{
  "$schema": "ontologic/rule-set/v1",
  "version": "0.4.5",
  "nsid": "ontologic.v045.rgb_cmyk_complete",
  "description": "Complete RGB ↔ CMY(K) closure with 25 normalized rules (12 light + 13 paint)",
  "principles": [
    "Associativity: A+(B+C) = (A+B)+C",
    "Commutativity: A+B = B+A (normalized multisets, inputs sorted)",
    "One 3-input rule: {C,M,Y} → K",
    "Identity: 1-input returns itself (domain-generic)",
    "Undefined combinations return ok=false without revert"
  ],
  "domains": {
    "color.light": {
      "description": "Additive color mixing (RGB → CMY + White)",
      "total_rules": 12
    },
    "color.paint": {
      "description": "Subtractive color mixing (CMY(K) → RGB + Black)",
      "total_rules": 13
    }
  },
  "rules": [
    {
      "id": 1,
      "domain": "color.light",
      "category": "additive",
      "operator": "mix_add@v1",
      "inputs": ["RED", "GREEN"],
      "output": "YELLOW",
      "ratio": 1,
      "description": "Additive secondary: red + green light → yellow",
      "normalized_multiset": "{R,G}"
    },
    {
      "id": 2,
      "domain": "color.light",
      "category": "additive",
      "operator": "mix_add@v1",
      "inputs": ["RED", "BLUE"],
      "output": "MAGENTA",
      "ratio": 1,
      "description": "Additive secondary: red + blue light → magenta",
      "normalized_multiset": "{R,B}"
    },
    {
      "id": 3,
      "domain": "color.light",
      "category": "additive",
      "operator": "mix_add@v1",
      "inputs": ["GREEN", "BLUE"],
      "output": "CYAN",
      "ratio": 1,
      "description": "Additive secondary: green + blue light → cyan",
      "normalized_multiset": "{G,B}"
    },
    {
      "id": 4,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["YELLOW", "RED"],
      "output": "GREEN",
      "ratio": 1,
      "description": "Secondary minus primary: yellow − red → green",
      "normalized_multiset": "{Y,R}",
      "relation": "Y−R==G"
    },
    {
      "id": 5,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["YELLOW", "GREEN"],
      "output": "RED",
      "ratio": 1,
      "description": "Secondary minus primary: yellow − green → red",
      "normalized_multiset": "{Y,G}",
      "relation": "Y−G==R"
    },
    {
      "id": 6,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["MAGENTA", "RED"],
      "output": "BLUE",
      "ratio": 1,
      "description": "Secondary minus primary: magenta − red → blue",
      "normalized_multiset": "{M,R}",
      "relation": "M−R==B"
    },
    {
      "id": 7,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["MAGENTA", "BLUE"],
      "output": "RED",
      "ratio": 1,
      "description": "Secondary minus primary: magenta − blue → red",
      "normalized_multiset": "{M,B}",
      "relation": "M−B==R"
    },
    {
      "id": 8,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["CYAN", "GREEN"],
      "output": "BLUE",
      "ratio": 1,
      "description": "Secondary minus primary: cyan − green → blue",
      "normalized_multiset": "{C,G}",
      "relation": "C−G==B"
    },
    {
      "id": 9,
      "domain": "color.light",
      "category": "subtractive",
      "operator": "check_sub@v1",
      "inputs": ["CYAN", "BLUE"],
      "output": "GREEN",
      "ratio": 1,
      "description": "Secondary minus primary: cyan − blue → green",
      "normalized_multiset": "{C,B}",
      "relation": "C−B==G"
    },
    {
      "id": 10,
      "domain": "color.light",
      "category": "white_complement",
      "operator": "check_sub@v1",
      "inputs": ["WHITE", "RED"],
      "output": "CYAN",
      "ratio": 1,
      "description": "White complement: white − red → cyan",
      "normalized_multiset": "{W,R}",
      "relation": "W−R==C"
    },
    {
      "id": 11,
      "domain": "color.light",
      "category": "white_complement",
      "operator": "check_sub@v1",
      "inputs": ["WHITE", "GREEN"],
      "output": "MAGENTA",
      "ratio": 1,
      "description": "White complement: white − green → magenta",
      "normalized_multiset": "{W,G}",
      "relation": "W−G==M"
    },
    {
      "id": 12,
      "domain": "color.light",
      "category": "white_complement",
      "operator": "check_sub@v1",
      "inputs": ["WHITE", "BLUE"],
      "output": "YELLOW",
      "ratio": 1,
      "description": "White complement: white − blue → yellow",
      "normalized_multiset": "{W,B}",
      "relation": "W−B==Y"
    },
    {
      "id": 13,
      "domain": "color.paint",
      "category": "pairwise_mix",
      "operator": "mix_add@v1",
      "inputs": ["CYAN", "MAGENTA"],
      "output": "BLUE",
      "ratio": 1,
      "description": "Subtractive mixing: cyan + magenta pigment → blue",
      "normalized_multiset": "{C,M}"
    },
    {
      "id": 14,
      "domain": "color.paint",
      "category": "pairwise_mix",
      "operator": "mix_add@v1",
      "inputs": ["MAGENTA", "YELLOW"],
      "output": "RED",
      "ratio": 1,
      "description": "Subtractive mixing: magenta + yellow pigment → red",
      "normalized_multiset": "{M,Y}"
    },
    {
      "id": 15,
      "domain": "color.paint",
      "category": "pairwise_mix",
      "operator": "mix_add@v1",
      "inputs": ["CYAN", "YELLOW"],
      "output": "GREEN",
      "ratio": 1,
      "description": "Subtractive mixing: cyan + yellow pigment → green",
      "normalized_multiset": "{C,Y}"
    },
    {
      "id": 16,
      "domain": "color.paint",
      "category": "triple_saturation",
      "operator": "mix_add@v1",
      "inputs": ["CYAN", "MAGENTA", "YELLOW"],
      "output": "BLACK",
      "ratio": 1,
      "description": "Triple saturation: C+M+Y → K (BLACK key plate)",
      "normalized_multiset": "{C,M,Y}",
      "note": "Only 3-input rule; BLACK represents CMYK 'K' component"
    },
    {
      "id": 17,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["RED", "MAGENTA"],
      "output": "YELLOW",
      "ratio": 1,
      "description": "Remove pigment: red − magenta → yellow",
      "normalized_multiset": "{R,M}",
      "relation": "R−M==Y"
    },
    {
      "id": 18,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["RED", "YELLOW"],
      "output": "MAGENTA",
      "ratio": 1,
      "description": "Remove pigment: red − yellow → magenta",
      "normalized_multiset": "{R,Y}",
      "relation": "R−Y==M"
    },
    {
      "id": 19,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["GREEN", "CYAN"],
      "output": "YELLOW",
      "ratio": 1,
      "description": "Remove pigment: green − cyan → yellow",
      "normalized_multiset": "{G,C}",
      "relation": "G−C==Y"
    },
    {
      "id": 20,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["GREEN", "YELLOW"],
      "output": "CYAN",
      "ratio": 1,
      "description": "Remove pigment: green − yellow → cyan",
      "normalized_multiset": "{G,Y}",
      "relation": "G−Y==C"
    },
    {
      "id": 21,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["BLUE", "CYAN"],
      "output": "MAGENTA",
      "ratio": 1,
      "description": "Remove pigment: blue − cyan → magenta",
      "normalized_multiset": "{B,C}",
      "relation": "B−C==M"
    },
    {
      "id": 22,
      "domain": "color.paint",
      "category": "secondary_minus_primary",
      "operator": "check_sub@v1",
      "inputs": ["BLUE", "MAGENTA"],
      "output": "CYAN",
      "ratio": 1,
      "description": "Remove pigment: blue − magenta → cyan",
      "normalized_multiset": "{B,M}",
      "relation": "B−M==C"
    },
    {
      "id": 23,
      "domain": "color.paint",
      "category": "black_complement",
      "operator": "check_sub@v1",
      "inputs": ["BLACK", "CYAN"],
      "output": "RED",
      "ratio": 1,
      "description": "Black complement: K − cyan → red (BLACK as CMYK K)",
      "normalized_multiset": "{K,C}",
      "relation": "K−C==R"
    },
    {
      "id": 24,
      "domain": "color.paint",
      "category": "black_complement",
      "operator": "check_sub@v1",
      "inputs": ["BLACK", "MAGENTA"],
      "output": "GREEN",
      "ratio": 1,
      "description": "Black complement: K − magenta → green (BLACK as CMYK K)",
      "normalized_multiset": "{K,M}",
      "relation": "K−M==G"
    },
    {
      "id": 25,
      "domain": "color.paint",
      "category": "black_complement",
      "operator": "check_sub@v1",
      "inputs": ["BLACK", "YELLOW"],
      "output": "BLUE",
      "ratio": 1,
      "description": "Black complement: K − yellow → blue (BLACK as CMYK K)",
      "normalized_multiset": "{K,Y}",
      "relation": "K−Y==B"
    }
  ],
  "implementation_notes": {
    "commutativity": "All inputs normalized as sorted multisets, so {R,G} and {G,R} produce identical ruleId via order-invariant hashing",
    "associativity": "Larger input sets (3+) can be folded via sequential application (e.g., {R,G,B} → Y; Y+B → W)",
    "identity": "1-input rules handled generically: if token ∈ domain → ok=true, output=input; else ok=false",
    "undefined_combinations": "Combinations not in rule set (e.g., M+C in light domain) return ok=false without revert",
    "3_input_rule": "Only one 3-input rule required: {C,M,Y} → K (rule id 16)",
    "black_token": "BLACK token represents CMYK 'K' (key plate) component in paint domain"
  },
  "deployment_strategy": {
    "phase_1": "Register all 3 additive rules (ids 1-3) for initial minting capability",
    "phase_2": "Register 6 light subtractive rules (ids 4-9) after CMY tokens exist",
    "phase_3": "Register 3 white complement rules (ids 10-12) after WHITE token exists",
    "phase_4": "Register 3 paint pairwise rules (ids 13-15) for CMY→RGB in paint domain",
    "phase_5": "Register triple saturation rule (id 16) for CMY→K demonstration",
    "phase_6": "Register 6 paint secondary-primary rules (ids 17-22)",
    "phase_7": "Register 3 black complement rules (ids 23-25) using BLACK as CMYK K"
  },
  "validation_coverage": {
    "total_rules": 25,
    "light_domain": 12,
    "paint_domain": 13,
    "additive_operations": 7,
    "subtractive_checks": 18,
    "2_input_rules": 24,
    "3_input_rules": 1
  }
}
